# Solar Wallet Codebase Overview

This codebase is for **Solar Wallet**, a cross-platform cryptocurrency wallet application built for the **Stellar** network. It is designed to run on **Desktop** (macOS, Windows, Linux) via Electron and **Mobile** (Android, iOS) via Cordova, with a core codebase built in **TypeScript** and **React**.

### 1. Technology Stack

- **Core Framework**: React (Functional components, Hooks).
- **Language**: TypeScript (used extensively for type safety).
- **Cross-Platform Engines**:
  - **Electron**: For desktop applications.
  - **Cordova**: For mobile applications.
- **Blockchain**: `stellar-sdk` for interacting with the Stellar network.
- **Build Tools**: Parcel (bundler), Electron Builder.
- **UI/Styling**: Material UI components, CSS modules, and custom layouts.

### 2. Architecture Overview

The project follows a **Feature-Based Architecture**. Instead of grouping files by type (controllers, views, models), code is grouped by domain/functionality (e.g., `Account`, `Payment`, `Trading`).

#### **`src/` - The Core Application**

This contains the shared React application logic.

- **Feature Modules**:

  - **`Account/`**, **`AccountCreation/`**, **`AccountSettings/`**: Management of user accounts, balances, and keys.
  - **`Payment/`**: Sending and receiving assets.
  - **`Trading/`**: Interface for the Stellar Decentralized Exchange (DEX).
  - **`TransferService/`**: Handling fiat on/off ramps (likely implementing SEPs like SEP-6/SEP-24).
  - **`Transaction/`** & **`TransactionReview/`**: Logic for building, signing, and reviewing transactions before submission.
  - **`ManageSigners/`**: Advanced multi-signature account configuration.

- **Core Infrastructure**:
  - **`App/`**: Application bootstrapping, routing, and global **Contexts** (`contexts/`) for state management (Accounts, Settings, Notifications).
  - **`Platform/`**: A critical abstraction layer. It exposes a unified API for platform-specific features (IPC, biometrics, clipboard, storage) so the UI code doesn't need to know if it's running on Electron or Cordova.
  - **`Workers/`**: Background workers (Web Workers) to handle heavy computations or network requests without freezing the UI.
  - **`Generic/`** & **`Layout/`**: Reusable UI components (Buttons, Lists, Dialogs) and higher-order components.

#### **`electron/` - Desktop Specifics**

Contains the **Main Process** code for the desktop app.

- **`src/app.ts`**: The entry point for the Electron main process.
- **`src/ipc/`**: Inter-Process Communication handlers to talk to the React renderer process (e.g., for file system access, auto-updates).

#### **`cordova/` - Mobile Specifics**

Contains configuration and hooks for building the mobile apps.

- **`config/`**: Cordova `config.xml` templates.
- **`scripts/`**: Hooks for modifying the native Android/iOS projects during build time.

#### **`shared/`**

Contains TypeScript definitions and constants shared between the backend (Electron main process) and frontend (React renderer), ensuring type safety across boundaries (especially for IPC messages).

### 3. Key Concepts

- **Platform Abstraction**: The `Platform` module (`src/Platform`) detects the environment and swaps implementations. For example, `bio-auth.ts` will use `cordova-plugin-fingerprint-aio` on mobile and a different approach or no-op on desktop.
- **State Management**: The app uses React Context heavily (`src/App/contexts`) rather than Redux. There is also a `caches.tsx` context for caching data.
- **Security**: Sensitive keys seem to be managed carefully, with dedicated modules for `KeyExport` and `SecretKeyImport`.
- **Internationalization (i18n)**: Handled in `i18n/`, with support for English, Spanish, and Italian.

### 4. Development Commands

Based on `package.json`:

- `npm run dev:app`: Starts the Electron app in development mode.
- `npm run dev:bundle`: Starts the Parcel bundler for the React app with hot reloading.
- `npm run build:mac` / `build:win` / `build:linux`: Builds the desktop production binaries.
- `npm run storybook`: Launches the component explorer.
