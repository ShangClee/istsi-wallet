# Solar Wallet - 2026-01-23 Update

This document details the modernization efforts and fixes applied to the Solar Wallet codebase compared to the original repository (https://github.com/solar-wallet/solar).

## Key Changes & Modernization

### 1. Build System Migration (Vite)
The project has been migrated from the legacy bundler (Parcel) to **Vite** for significantly faster development start-up and Hot Module Replacement (HMR).

*   **Configuration**: Added `vite.config.ts` to manage the build process for both the Electron main process and the React renderer.
*   **Plugins**: Integrated `vite-plugin-electron` for seamless Electron development and `vite-plugin-node-polyfills` to support Node.js modules in the browser environment.

### 2. Electron Development Environment Fixes
Several issues preventing the application from running correctly in the macOS development environment were resolved:

*   **Sandbox Disabled**: Fixed "Operation not permitted" initialization errors on macOS by explicitly disabling the Electron sandbox.
    *   `electron/src/window.ts`: Set `sandbox: false`.
    *   `electron/src/bootstrap.ts`: Added `app.commandLine.appendSwitch("no-sandbox")`.
*   **Single Instance Lock Handling**: Modified `electron/src/protocol-handler.ts` to bypass the `app.quit()` call when the single-instance lock fails during development. This prevents the dev server from terminating unexpectedly due to zombie processes or lock conflicts.
*   **Startup Logic**: Updated `electron/src/app.ts` to check `app.isReady()` synchronously. This fixes a race condition where the `ready` event could be missed if the app initialized before the event listener was attached.

### 3. UI & Styling Architecture
The CSS loading strategy was refactored to ensure compatibility with Vite and PostCSS/Tailwind.

*   **JS-based Style Imports**: Moved CSS loading from `index.html` `<link>` tags to direct imports in `src/bootstrap.ts`. This ensures styles pass through the build pipeline correctly.
    *   Imported `tailwind.css`
    *   Imported `App/css/fonts.css`
    *   Imported `App/css/base-styles.css`
    *   Imported `SplashScreen/splash.css`
*   **Splash Screen Restoration**: Restored the missing Splash Screen HTML structure in `index.html` and ensured its styles are loaded, fixing the broken launch visual.
*   **Tailwind Fixes**: Cleaned up duplicate `@tailwind` directives in `base-styles.css` to prevent build warnings and conflicts.

## How to Run

To start the modernized development server:

```bash
npm run dev
```

This command now launches Vite, which handles both the React dev server and the Electron application window.
